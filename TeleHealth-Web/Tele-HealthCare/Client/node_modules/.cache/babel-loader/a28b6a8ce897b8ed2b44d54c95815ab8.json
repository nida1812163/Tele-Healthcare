{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abidh\\\\OneDrive\\\\Desktop\\\\Final FYP\\\\Final FYP\\\\official Tele-HealthCare\\\\Client\\\\src\\\\pages\\\\chat.js\",\n    _s = $RefreshSig$();\n\nimport TextField from \"@material-ui/core/TextField\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport \"../chat.css\";\nimport Axios from 'axios';\nimport DoctorNavbar from \"../components/DoctorNavbar\";\nimport DoctorSideBar from \"../components/DoctorSideBar\";\nimport Appointment from './appointments';\nimport { data } from './appointments'; // Import the functions you need from the SDKs you need\n\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getDatabase, ref, set, onValue, push } from \"firebase/database\"; // TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\ntry {\n  const firebaseConfig = {\n    apiKey: \"AIzaSyAj2SudXeA1661fcEb1JdprIPLqXd3KbYE\",\n    authDomain: \"telehealth-92d03.firebaseapp.com\",\n    databaseURL: \"https://telehealth-92d03-default-rtdb.firebaseio.com\",\n    projectId: \"telehealth-92d03\",\n    storageBucket: \"telehealth-92d03.appspot.com\",\n    messagingSenderId: \"522448216881\",\n    appId: \"1:522448216881:web:2221d15aa51f8a14650610\",\n    measurementId: \"G-3Q3KYD93FX\"\n  };\n  const app = initializeApp(firebaseConfig); // Initialize Firebase\n  //const analytics = getAnalytics(app);\n  // Get a reference to the database service\n\n  const database = getDatabase(app);\n} catch (error) {\n  console.log(error);\n}\n\nfunction Chat() {\n  _s();\n\n  const [initializing, setInitializing] = useState(true);\n  const [state, setState] = useState({\n    message: \"\",\n    name: \"\"\n  });\n  const [name, setName] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [chat, setChat] = useState([]); //const [appointment_time, setAppointmentTime]=useState(new Date().toTimeString().split(':').slice(0,-1).join(':'))\n  // \tconst getData =()=>{\n  // \t\tAxios.post('http://localhost:3001/appointmentTime').then(res => {\n  //             setAppointmentTime(res.data)\n  // \t\t\tvar string = JSON.stringify(res.data)\n  //     var json = JSON.parse(string)\n  // })\n  // }\n  //getData();\n\n  var tostring = JSON.stringify(data);\n  var StringTime = JSON.parse(tostring);\n  console.log(StringTime);\n  useEffect(() => {\n    try {\n      const db = getDatabase();\n      const starCountRef = ref(db, 'chat/' + StringTime); // 11:12 ki jaga appointment time pass krna h uske against messages ana start hojayenge\n\n      onValue(starCountRef, snapshot => {\n        const list = [];\n\n        if (snapshot != null) {\n          snapshot.forEach(value => {\n            var name = value.node.children.root_.value.value_;\n            var role = value.node.children.root_.right.value.value_;\n            var message = value.node.children.root_.left.value.value_;\n            list.push({\n              name,\n              role,\n              message\n            });\n            console.log(name, role, message);\n          });\n        }\n\n        setChat(list);\n        setInitializing(false);\n        console.log(\"result\", snapshot);\n      });\n    } catch (ex) {\n      console.log(ex);\n    }\n  }, initializing);\n\n  const onMessageSubmit = () => {\n    const db = getDatabase();\n    var today = new Date(),\n        time = today.getDate() + '-' + (today.getMonth() + 1) + '-' + today.getFullYear() + '-' + today.getHours() + ':' + today.getMinutes();\n    const appointmentTime = StringTime; // yahan appointment time ayega\n\n    const reference = ref(db, 'chat/' + appointmentTime + \"/\" + time);\n    set(reference, {\n      name: name,\n      role: \"doctor\",\n      message: message\n    });\n    console.log(\"babar: button click called\");\n  };\n\n  const onNameTextChange = e => {\n    setName(e.target.value);\n  };\n\n  const onMessageTextChange = e => {\n    setMessage(e.target.value);\n  };\n\n  const renderChat = () => {\n    return chat.map((_ref, index) => {\n      let {\n        name,\n        message\n      } = _ref;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"chat-h3\",\n          children: [name, \": \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"rgb(0,0,0)\"\n            },\n            children: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 5\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 4\n      }, this);\n    });\n  };\n\n  const [render, setRender] = useState(true);\n\n  const getDoctorID = () => {\n    Axios.get('http://localhost:3001/Doctor_ID').then(res => {\n      // setList(res.data)\n      var string = JSON.stringify(res.data);\n      var json = JSON.parse(string); // alert(string)\n      // alert(json.doctor_id);\n\n      if (json.doctor_id === 0) {\n        setRender(false);\n        window.location = '/';\n        alert(\"You Need To Sign In First!!!\");\n      } // else{\n      //   setRender(true)\n      // }\n\n    });\n  };\n\n  getDoctorID();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"wrapper\",\n      style: {\n        background: 'linear-gradient(90deg, rgb(41,16,112) 0%, rgb(41,16,112) 100%)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(DoctorSideBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex flex-column\",\n        id: \"content-wrapper\",\n        style: {\n          background: '#bac6dd'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"content\",\n          style: {\n            color: '#2D2F3E'\n          },\n          children: [/*#__PURE__*/_jsxDEV(DoctorNavbar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-fluid\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row table-row-container\",\n              style: {\n                maxWidth: \"97%\",\n                minWidth: '20px'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"chat-card\",\n                  children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                    className: \"chat-form\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Messenger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 194,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"name-field12\",\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        name: \"name\",\n                        onChange: e => onNameTextChange(e),\n                        value: name,\n                        label: \"Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 14\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: /*#__PURE__*/_jsxDEV(TextField, {\n                        name: \"message\",\n                        onChange: e => onMessageTextChange(e),\n                        value: message,\n                        id: \"outlined-multiline-static\",\n                        variant: \"outlined\",\n                        label: \"Message\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 14\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 13\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"chat-button\",\n                      onClick: onMessageSubmit,\n                      children: \"Send Message\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 208,\n                      columnNumber: 13\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"render-chat\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                      children: \"Chat Log\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 13\n                    }, this), renderChat()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 13\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 8\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Chat, \"AZa+783SeymqSdw31R/asYVWf18=\");\n\n_c = Chat;\nexport default _c2 = /*#__PURE__*/React.memo(Chat);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Chat\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/abidh/OneDrive/Desktop/Final FYP/Final FYP/official Tele-HealthCare/Client/src/pages/chat.js"],"names":["TextField","React","useEffect","useRef","useState","Axios","DoctorNavbar","DoctorSideBar","Appointment","data","initializeApp","getAnalytics","getDatabase","ref","set","onValue","push","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","app","database","error","console","log","Chat","initializing","setInitializing","state","setState","message","name","setName","setMessage","chat","setChat","tostring","JSON","stringify","StringTime","parse","db","starCountRef","snapshot","list","forEach","value","node","children","root_","value_","role","right","left","ex","onMessageSubmit","today","Date","time","getDate","getMonth","getFullYear","getHours","getMinutes","appointmentTime","reference","onNameTextChange","e","target","onMessageTextChange","renderChat","map","index","color","render","setRender","getDoctorID","get","then","res","string","json","doctor_id","window","location","alert","background","maxWidth","minWidth","memo"],"mappings":"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","sourcesContent":["import TextField from \"@material-ui/core/TextField\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\nimport \"../chat.css\"\r\nimport Axios from 'axios';\r\nimport DoctorNavbar from \"../components/DoctorNavbar\"\r\nimport DoctorSideBar from \"../components/DoctorSideBar\"\r\nimport Appointment from './appointments'\r\nimport {data} from './appointments'\r\n\r\n// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\nimport { getAnalytics } from \"firebase/analytics\";\r\nimport { getDatabase, ref, set, onValue, push } from \"firebase/database\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\ntry{\r\nconst firebaseConfig = {\r\n\r\n\t\tapiKey: \"AIzaSyAj2SudXeA1661fcEb1JdprIPLqXd3KbYE\",\r\n\t\tauthDomain: \"telehealth-92d03.firebaseapp.com\",\r\n\t\tdatabaseURL: \"https://telehealth-92d03-default-rtdb.firebaseio.com\",\r\n\t\tprojectId: \"telehealth-92d03\",\r\n\t\tstorageBucket: \"telehealth-92d03.appspot.com\",\r\n\t\tmessagingSenderId: \"522448216881\",\r\n\t\tappId: \"1:522448216881:web:2221d15aa51f8a14650610\",\r\n\t\tmeasurementId: \"G-3Q3KYD93FX\"\r\n\t};\r\n\tconst app = initializeApp(firebaseConfig);\r\n\t// Initialize Firebase\r\n\t//const analytics = getAnalytics(app);\r\n\t// Get a reference to the database service\r\n\tconst database = getDatabase(app);\r\n}catch(error){\r\n\tconsole.log(error)\r\n\r\n}\r\n\r\n\r\nfunction Chat() {\r\n\r\n\r\n\tconst [initializing, setInitializing] = useState(true);\r\n\tconst [state, setState] = useState({ message: \"\", name: \"\" })\r\n\tconst [name, setName] = useState(\"\")\r\n\tconst [message, setMessage] = useState(\"\")\r\n\tconst [chat, setChat] = useState([])\r\n\t//const [appointment_time, setAppointmentTime]=useState(new Date().toTimeString().split(':').slice(0,-1).join(':'))\r\n\r\n\r\n// \tconst getData =()=>{\r\n// \t\tAxios.post('http://localhost:3001/appointmentTime').then(res => {\r\n//             setAppointmentTime(res.data)\r\n// \t\t\tvar string = JSON.stringify(res.data)\r\n    \r\n//     var json = JSON.parse(string)\r\n\r\n\t\r\n// })\r\n// }\r\n\r\n\r\n\t//getData();\r\nvar tostring = JSON.stringify(data)\r\nvar StringTime = JSON.parse(tostring)\r\n\r\n\tconsole.log(StringTime)\r\n\r\n\tuseEffect(\r\n\t\t() => {\r\n\t\t\ttry {\r\n\t\t\t\tconst db = getDatabase();\r\n\t\t\t\tconst starCountRef = ref(db, 'chat/' + StringTime); // 11:12 ki jaga appointment time pass krna h uske against messages ana start hojayenge\r\n\t\t\t\tonValue(starCountRef, (snapshot) => {\r\n\r\n\t\t\t\t\tconst list = []\r\n\r\n\t\t\t\t\tif (snapshot != null) {\r\n\t\t\t\t\t\tsnapshot.forEach(value => {\r\n\t\t\t\t\t\t\tvar name = value.node.children.root_.value.value_\r\n\t\t\t\t\t\t\tvar role = value.node.children.root_.right.value.value_\r\n\t\t\t\t\t\t\tvar message = value.node.children.root_.left.value.value_\r\n\t\t\t\t\t\t\tlist.push({ name, role, message });\r\n\r\n\t\t\t\t\t\t\tconsole.log(name, role, message)\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetChat(list)\r\n\t\t\t\t\tsetInitializing(false)\r\n\r\n\t\t\t\t\tconsole.log(\"result\", snapshot)\r\n\t\t\t\t});\r\n\t\t\t} catch (ex) {\r\n\t\t\t\tconsole.log(ex);\r\n\t\t\t}\r\n\t\t}, initializing\r\n\t)\r\n\r\n\tconst onMessageSubmit = () => {\r\n\r\n\t\tconst db = getDatabase();\r\n\t\tvar today = new Date(),\r\n\r\n\t\ttime = today.getDate() + '-' + (today.getMonth() + 1) + '-' + today.getFullYear() + '-' + today.getHours() + ':' + (today.getMinutes());\r\n\t\tconst appointmentTime = StringTime; // yahan appointment time ayega\r\n\t\tconst reference = ref(db, 'chat/' + appointmentTime+\"/\" + time);\r\n\t\tset((reference), {\r\n\t\t\tname: name,\r\n\t\t\trole: \"doctor\",\r\n\t\t\tmessage: message\r\n\t\t});\r\n\r\n\t\tconsole.log(\"babar: button click called\")\r\n\r\n\t}\r\n\r\n\tconst onNameTextChange = (e) => {\r\n\t\tsetName(e.target.value)\r\n\t}\r\n\r\n\tconst onMessageTextChange = (e) => {\r\n\t\tsetMessage(e.target.value)\r\n\t}\r\n\r\n\t\r\n\r\n\tconst renderChat = () => {\r\n\t\treturn chat.map(({ name, message }, index) => (\r\n\t\t\t<div key={index}>\r\n\t\t\t\t<h3 className=\"chat-h3\">\r\n\t\t\t\t\t{name}: <span style={{ color: \"rgb(0,0,0)\" }}>{message}</span>\r\n\t\t\t\t</h3>\r\n\t\t\t</div>\r\n\t\t))\r\n\t}\r\n\r\n\tconst [render, setRender] = useState(true)\r\n\r\n\tconst getDoctorID = () => {\r\n\r\n\t\tAxios.get('http://localhost:3001/Doctor_ID').then(res => {\r\n\r\n\t\t\t// setList(res.data)\r\n\r\n\r\n\t\t\tvar string = JSON.stringify(res.data)\r\n\r\n\t\t\tvar json = JSON.parse(string)\r\n\r\n\t\t\t// alert(string)\r\n\t\t\t// alert(json.doctor_id);\r\n\r\n\r\n\t\t\tif (json.doctor_id === 0) {\r\n\t\t\t\tsetRender(false)\r\n\t\t\t\twindow.location = '/'\r\n\t\t\t\talert(\"You Need To Sign In First!!!\")\r\n\t\t\t}\r\n\r\n\t\t\t// else{\r\n\t\t\t//   setRender(true)\r\n\t\t\t// }\r\n\t\t})\r\n\r\n\t}\r\n\r\n\tgetDoctorID()\r\n\r\n\treturn (\r\n\r\n\r\n\t\t<div >\r\n\t\t\t{(\r\n\t\t\t\t<div id=\"wrapper\" style={{ background: 'linear-gradient(90deg, rgb(41,16,112) 0%, rgb(41,16,112) 100%)' }}>\r\n\r\n\t\t\t\t\t<DoctorSideBar />\r\n\t\t\t\t\t<div className=\"d-flex flex-column\" id=\"content-wrapper\" style={{ background: '#bac6dd' }}>\r\n\t\t\t\t\t\t<div id=\"content\" style={{ color: '#2D2F3E' }}>\r\n\r\n\t\t\t\t\t\t\t<DoctorNavbar />\r\n\t\t\t\t\t\t\t<div className=\"container-fluid\" >\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"row table-row-container\" style={{ maxWidth: \"97%\", minWidth: '20px' }}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-card\">\r\n\t\t\t\t\t\t\t\t\t\t\t<form className=\"chat-form\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1>Messenger</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"name-field12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField name=\"name\" onChange={(e) => onNameTextChange(e)} value={name} label=\"Name\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => onMessageTextChange(e)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={message}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"outlined-multiline-static\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"Message\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button className=\"chat-button\" onClick={onMessageSubmit}>Send Message</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t{<div className=\"render-chat\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1>Chat Log</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trenderChat()\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default React.memo(Chat)\r\n"]},"metadata":{},"sourceType":"module"}